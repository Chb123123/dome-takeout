(function(){var t={9659:function(t,s,e){"use strict";var i=e(144),a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"AppContainer"},[e("keep-alive",{attrs:{include:"myHome, myCart"}},[e("router-view")],1)],1)},o=[],n={},r=n,c=e(1001),l=(0,c.Z)(r,a,o,!1,null,"5934bc72",null),d=l.exports,p=e(8345),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"AppContainer"},[e("div",{staticClass:"Apphead"},[e("div",{staticClass:"address",on:{click:t.gotoSubmit}},[t._v(t._s(t.address.name)+" "),e("span",{staticClass:"move"})]),e("div",{staticClass:"address",on:{click:t.gotoSubmit}},[t._v(t._s(t.address.name)+" "),e("span",{staticClass:"move"})]),e("div",{staticClass:"shopping-cart",on:{click:t.gotoOrede}},[e("van-icon",{attrs:{name:"cart-o"}})],1),e("div",{staticClass:"Private-letter",on:{click:t.information}},[e("van-icon",{attrs:{name:"comment-o"}})],1)]),e("div",{staticClass:"submitBox",on:{click:t.gotoSubmitCom}},[e("div",{staticClass:"submit"},[e("div",{staticClass:"submitBtn"},[t._v("搜索")]),e("div",{staticClass:"photograph"},[e("van-icon",{attrs:{name:"photograph"}})],1),e("div",{staticClass:"submitSuggest"},[t._v("派乐炸鸡汉堡")])])]),e("div",{staticClass:"navbar"},[e("Navber",{attrs:{navList:t.shopNavList}})],1),e("div",{staticClass:"Attributes"},t._l(t.shopNav,(function(s,i){return e("span",{key:i,class:s.class,on:{click:function(s){return t.checkedBtn(i)}}},[t._v(t._s(s.text))])})),0),e("div",{staticClass:"takewayBox"},[e("van-list",{attrs:{finished:t.finished,error:t.error,"error-text":"请求失败，点击重新加载","finished-text":"没有更多了"},on:{"update:error":function(s){t.error=s},load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.shopList,(function(t){return e("Takeaway",{key:t.id,attrs:{takeawayImg:t.image_path,takeawayTitle:t.name,score:t.rating,deliveryTime:t.order_lead_time,distance:t.distance,discount:t.supports,restaurant:t}})})),1),e("Tabbar")],1)])},v=[],h=e(629),m=e(9669),_=e.n(m);const C=_().create({baseURL:"https://elm.cangdu.org"});var g=C;const f=function(){return g({method:"get",url:"/v2/index_entry"})},y=function(t,s,e=0,i){return g({method:"get",url:"/shopping/restaurants",params:{latitude:s,longitude:t,offset:e,order_by:i}})};var b=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"takewayContainer",on:{click:t.getRestaurantId}},[e("div",{staticClass:"takeawayImg"},[e("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.takeawayImg,alt:""}})]),e("div",{staticClass:"takeawayAbout"},[e("div",{staticClass:"takeawaytitle"},[t._v(t._s(t.takeawayTitle)+" ")]),e("div",{staticClass:"takeawayFraction"},[t._v(t._s(t.score)+"分 "),e("div",{staticClass:"delivery"},[t._v(t._s(t.distance)+" "+t._s(t.deliveryTime))])]),e("div",{staticClass:"delivery"},[t._v("起送￥15")]),t._m(0),e("div",{staticClass:"discount"},[t.discount[0]?e("div",{staticClass:"support",style:"color:#"+t.discount[0].icon_color},[t._v(t._s(t.discount[0].name))]):t._e(),t.discount[1]?e("div",{staticClass:"support",style:"color:#"+t.discount[1].icon_color},[t._v(t._s(t.discount[1].name))]):t._e(),t.discount[2]?e("div",{staticClass:"support",style:"color:#"+t.discount[2].icon_color},[t._v(t._s(t.discount[2].name))]):t._e()])])])},k=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Evaluation"},[e("div",{staticClass:"Evaluation1"},[t._v("热情掌柜")])])}],w=e(4297),S={props:{takeawayTitle:{},takeawayImg:{},score:{},deliveryTime:{},distance:{},discount:{},restaurant:{}},computed:{...(0,h.rn)(["userAbout"])},methods:{...(0,h.OI)(["getshopid"]),getRestaurantId(){this.userAbout?(this.getshopid(this.restaurant),this.$router.push("/shopInterface")):w.Z.confirm({message:"账号未登入"}).then((()=>{this.$router.push("/login")})).catch((()=>{}))}}},E=S,L=(0,c.Z)(E,b,k,!1,null,"b5219d04",null),x=L.exports,R=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"box"},[e("van-swipe",{staticClass:"my-swipe",attrs:{"indicator-color":"#0BB7F7"}},t._l(t.navList,(function(s){return e("van-swipe-item",{key:s.id},[e("div",{staticClass:"navbarContainer"},t._l(s,(function(s){return e("div",{key:s.id,staticClass:"nav",on:{click:function(e){return t.getNavId(s.id,s.title)}}},[e("img",{attrs:{src:"https://fuss10.elemecdn.com"+s.image_url,alt:""}}),e("span",{staticClass:"navtitle"},[t._v(t._s(s.title))])])})),0)])})),1)],1)},I=[],P={props:{navList:{}},methods:{getNavId(t,s){this.$router.push("/navPage?id="+t+"&title="+s)}}},T=P,A=(0,c.Z)(T,R,I,!1,null,"0d774c7f",null),N=A.exports;const $=function(){return g({method:"get",url:"/v1/cities",params:{type:"guess"}})};var O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("van-tabbar",{attrs:{route:"",fixed:"","z-index":"9999"}},[e("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{icon:"search",to:"/submit"}},[t._v("搜索")]),e("van-tabbar-item",{attrs:{icon:"cart-o",to:"/cart"}},[t._v("订单")]),t.userAbout?e("van-tabbar-item",{attrs:{icon:"friends-o",to:"/user"}},[t._v("用户")]):e("van-tabbar-item",{attrs:{icon:"friends-o",dot:t.isLogin,to:"/user"}},[t._v("用户")])],1)},B=[],Z={name:"tabbarStyle",data(){return{count:0,isLogin:!0}},computed:{...(0,h.rn)(["shoppingCart","userAbout"])}},U=Z,F=(0,c.Z)(U,O,B,!1,null,null,null),H=F.exports,D=e(9146),M={name:"myHome",components:{Takeaway:x,Tabbar:H,Navber:N},data(){return{address:{},shopList:[],shopList_1:[],error:!1,loading:!0,finished:!1,num:0,shopNavList:[],order_by:4,shopNav:[{class:"checkedStyle",text:"智能排序"},{class:"",text:"配送速度"},{class:"",text:"距离最近"},{class:"",text:"销量最高"}]}},computed:{...(0,h.rn)(["detailedAddress","addressDetails","showHint"])},methods:{...(0,h.OI)(["newAddress","isShowHint","getUserAbout"]),gotoSubmitCom(){this.$router.push("/submit")},async getTakeawayAbout(){const t=await y(this.address.longitude,this.address.latitude,this.num,this.order_by);this.shopList=t.data,this.shopList_1=t.data,this.loading=!1},async onLoad(){this.num+=20;const t=await y(this.address.longitude,this.address.latitude,this.num,this.order_by);this.shopList=[...this.shopList,...t.data],this.loading=!1},async ShopNavBar(){const t=await f();let s=[];t.data.forEach(((t,e)=>{s.push(t),(e+1)%8===0&&(this.shopNavList.push(s),s=[])}))},async getNewCity(){const t=await $();this.detailedAddress?(this.address=this.detailedAddress,this.getTakeawayAbout(this.detailedAddress.longitude,this.detailedAddress.latitude)):(this.address=t.data,this.newAddress(this.address),this.getTakeawayAbout(this.addressDetails.longitude,this.addressDetails.latitude))},gotoSubmit(){this.$router.push("/submitarea")},async checkedBtn(t){if(this.shopList=[],this.shopNav.some((t=>{t.class=""})),this.shopNav[t].class="checkedStyle",0===t)this.order_by=4,this.shopList=this.shopList_1;else if(1===t){this.order_by=2;const t=await y(this.address.longitude,this.address.latitude,this.num,this.order_by);this.shopList=t.data}else if(2===t){this.order_by=5;const t=await y(this.address.longitude,this.address.latitude,this.num,this.order_by);this.shopList=t.data}else{this.order_by=6;const t=await y(this.address.longitude,this.address.latitude,this.num,this.order_by);this.shopList=t.data}console.log(t)},gotoOrede(){this.$router.push("/cart")},information(){(0,D.Z)({message:"暂无功能",icon:"comment-o"})}},created(){console.log(JSON.parse(localStorage.getItem("elementUserInfo")));const t=JSON.parse(localStorage.getItem("elementUserInfo"));this.getUserAbout(t),this.getNewCity(),this.ShopNavBar(),this.showHint&&(w.Z.alert({title:"注意",message:"该项目还处于开发阶段，部分功能还未完成，敬请期待"}).then((()=>{})),this.isShowHint())}},z=M,q=(0,c.Z)(z,u,v,!1,null,"3c5abec6",null),G=q.exports,j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"userAboutContainer"},[e("div",{staticClass:"userintroduce"},[t.userAbout?e("div",{staticClass:"useravatar",on:{click:t.successLogin}},[t._v("已登录")]):e("div",{staticClass:"useravatar",on:{click:t.gotoLogin}},[t._v("未登录")]),t.userAbout?e("div",{staticClass:"username"},[t._v(t._s(t.userAbout.username))]):e("div",{staticClass:"username"},[t._v("sd846728346238")])]),e("div",{staticClass:"userassets"},[e("div",{staticClass:"myassets"},[t._v("我的资产")]),e("div",{staticClass:"voucher"},[e("div",{staticClass:"RedEnvelope",on:{click:t.gotoRedEnvelope}},[e("div",{staticClass:"RedEnvelopeTop"},[e("span",{staticStyle:{color:"#F74E44"}},[e("van-icon",{attrs:{name:"coupon"}})],1),t._v(" 红包/神券")]),e("div",{staticClass:"RedEnvelopeBottom"},[t.userUseRedEvnelope?e("span",[t._v(t._s(t.userUseRedEvnelope.length))]):e("span",[t._v("3")]),t._v("个未使用")])]),e("div",{staticClass:"RedEnvelope",on:{click:t.show}},[e("div",{staticClass:"RedEnvelopeTop"},[e("span",{staticStyle:{color:"#FEA238"}},[e("van-icon",{attrs:{name:"gold-coin"}})],1),t._v(" 代金券")]),t._m(0)]),e("div",{staticClass:"RedEnvelope",on:{click:t.show}},[e("div",{staticClass:"RedEnvelopeTop"},[e("span",{staticStyle:{color:"#FB7A3C"}},[e("van-icon",{attrs:{name:"send-gift"}})],1),t._v(" 立减金")]),e("div",{staticClass:"RedEnvelopeBottom"},[t._v("暂无")])])])]),e("div",{staticClass:"balance"},[e("div",{staticClass:"headbalance"},[t._v("账户余额")]),t.userAbout?e("div",{staticClass:"balancePrice"},[e("span",[t._v("￥")]),t._v(t._s(t.userBalance))]):e("div",{staticClass:"notLogin"},[t._v("请登入")])]),e("div",{staticClass:"collect",on:{click:t.show}},[e("div",{staticClass:"collectTitle"},[t._v("我的收藏")]),e("div",{staticClass:"collectintroduce"},[t._v("暂无收藏,添加收藏更快找到你的菜~")])]),e("div",{staticClass:"userwallet",on:{click:t.show}},[e("div",{staticClass:"myWallet"},[t._v("我的钱包")]),t._m(1)]),e("Tabbar")],1)},V=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"RedEnvelopeBottom"},[e("span",[t._v("0")]),t._v("张未使用")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"myPrice"},[e("div",{staticClass:"price"},[e("div",{staticClass:"priceNum"},[t._v("5000"),e("span",{staticStyle:{"font-size":"0.565rem","margin-left":"0.266rem"}},[t._v("元")])]),e("div",{staticClass:"borrowMoney"},[t._v("美团借钱")]),e("div",{staticClass:"AboutMoney"},[t._v("大约可借")])]),e("div",{staticClass:"price"},[e("div",{staticClass:"priceNum"},[t._v("1"),e("span",{staticStyle:{"font-size":"0.565rem","margin-left":"0.266rem"}},[t._v("次")])]),e("div",{staticClass:"borrowMoney"},[t._v("霸王餐")]),e("div",{staticClass:"AboutMoney"},[t._v("近期申卡奖励")])]),e("div",{staticClass:"price"},[e("div",{staticClass:"priceNum"},[t._v("1"),e("span",{staticStyle:{"font-size":"0.565rem","margin-left":"0.266rem"}},[t._v("张")])]),e("div",{staticClass:"borrowMoney"},[t._v("外卖神券")]),e("div",{staticClass:"AboutMoney"},[t._v("今日可领")])]),e("div",{staticClass:"price"},[e("div",{staticClass:"priceNum"},[t._v("9.58"),e("span",{staticStyle:{"font-size":"0.565rem","margin-left":"0.266rem"}},[t._v("元")])]),e("div",{staticClass:"borrowMoney"},[t._v("我的账单")]),e("div",{staticClass:"AboutMoney"},[t._v("最近支付")])])])}],Y=e(4174),W={components:{Tabbar:H,[Y.Z.Component.name]:Y.Z.Component},computed:{...(0,h.rn)(["userAbout","userUseRedEvnelope","userBalance"])},methods:{successLogin(){D.Z.success("已登录")},gotoLogin(){this.$router.push("/login")},show(){(0,Y.Z)({background:"#1989FA",message:"暂无功能",duration:1e3})},gotoRedEnvelope(){this.userAbout?this.$router.push("/redEnvelope"):w.Z.confirm({message:"账号未登入"}).then((()=>{this.$router.push("/login")})).catch((()=>{}))}}},J=W,X=(0,c.Z)(J,j,V,!1,null,"49f2a41f",null),K=X.exports,Q=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartViweContainer"},[e("div",{staticClass:"cartViweHead"},[0===t.showNav?e("span",{on:{click:function(s){return t.allBtn(0)}}},[t._v("全部")]):e("span",{staticClass:"notCheck",on:{click:function(s){return t.allBtn(0)}}},[t._v("全部")]),1===t.showNav?e("span",{on:{click:function(s){return t.allBtn(1)}}},[t._v("已完成")]):e("span",{staticClass:"notCheck",on:{click:function(s){return t.allBtn(1)}}},[t._v("已完成")]),2===t.showNav?e("span",{on:{click:function(s){return t.allBtn(2)}}},[t._v("未完成")]):e("span",{staticClass:"notCheck",on:{click:function(s){return t.allBtn(2)}}},[t._v("未完成")])]),0!==t.orderList.length||0!==t.notFinish.length?e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t.completedOrder.length>0&&!0===t.showYesOrder?e("div",t._l(t.orderList,(function(t,s){return e("MyComp",{key:s,attrs:{shoppingname:t.shopPingName,shoppingImg:t.shoppingImg,orderState:t.orderState,shop:t.checkedShop,deliveryTime:t.deliveryTime,shopPrice:t.Balance}})})),1):t._e(),!0===t.showNotOrder?e("div",t._l(t.notFinish,(function(t){return e("Order",{key:t._id,attrs:{shoppingname:t.restaurant_name,shoppingImg:t.restaurant_image_url,orderState:t.status_bar.title,shop:t.basket.group[0][0].name,deliveryTime:t.formatted_created_at,TradingInformation:t.status_bar.title,shopPrice:t.basket.group[0][0].price,quantity:t.basket.group[0][0].quantity}})})),1):t._e()])],1):e("div",[e("van-empty",{attrs:{description:"暂无订单"}})],1),e("Tabbar")],1)},tt=[];const st=function(t,s){return g({method:"get",url:"/bos/v2/users/1/orders",params:{limit:t,offset:s}})};var et=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orderContainer"},[e("div",{staticClass:"shopping"},[e("div",{staticClass:"shoppingImg"},[e("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.shoppingImg,alt:""}})]),e("div",{staticClass:"shoppingname"},[t._v(t._s(t.shoppingname))]),e("div",{staticClass:"Orderstate"},[t._v("交易失败")])]),e("div",{staticClass:"deliveryState"},[t._v(t._s(t.TradingInformation))]),e("div",{staticClass:"deliveryTime"},[t._v(t._s(t.deliveryTime))]),e("div",{staticClass:"shop"},[e("div",{staticClass:"firstShopImg"},[e("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.shoppingImg,alt:""}})]),e("div",{staticClass:"orderAbout"},[t._v(" "+t._s(t.shop)+" ")]),e("div",{staticClass:"price"},[e("div",{staticClass:"shopPrice"},[e("span",{staticClass:"priceStyle"},[t._v("¥")]),t._v(" "+t._s(t.price))]),e("div",{staticClass:"shopCount"},[t._v("共"+t._s(t.quantity)+"件")])])])])},it=[],at={props:{shoppingImg:{},shoppingname:{},deliveryTime:{},orderState:{},shop:{},TradingInformation:{},shopPrice:{},quantity:{}},data(){return{price:0}},created(){this.price=this.shopPrice*this.quantity}},ot=at,nt=(0,c.Z)(ot,et,it,!1,null,"f6b142ca",null),rt=nt.exports,ct=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orderContainer"},[e("div",{staticClass:"shopping"},[e("div",{staticClass:"shoppingImg"},[e("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.shoppingImg,alt:""}})]),e("div",{staticClass:"shoppingname"},[t._v(t._s(t.shoppingname))]),e("div",{staticClass:"Orderstate"},[t._v("已送达")])]),e("div",{staticClass:"deliveryState"},[t._v(t._s(t.TradingInformation))]),e("div",{staticClass:"deliveryTime"},[t._v(t._s(t.deliveryTime))]),1===t.shop.length?e("div",{staticClass:"shop"},[e("div",{staticClass:"firstShopImg"},[e("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.shop[0].image_path,alt:""}})]),e("div",{staticClass:"orderAbout"},[t._v(" "+t._s(t.shop[0].name)+" ")]),e("div",{staticClass:"price"},[e("div",{staticClass:"shopPrice"},[e("span",{staticClass:"priceStyle"},[t._v("¥")]),t._v(" "+t._s(t.price))]),e("div",{staticClass:"shopCount"},[t._v("共"+t._s(t.quantity)+"件")])])]):t._e(),t.shop.length>1?e("div",{staticClass:"multipleShop"},[e("div",{staticClass:"shopImgBox"},t._l(t.shop,(function(t,s){return e("div",{key:s,staticClass:"firstShopImg"},[e("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.image_path,alt:""}})])})),0),e("div",{staticClass:"price"},[e("div",{staticClass:"shopPrice"},[e("span",{staticClass:"priceStyle"},[t._v("¥")]),t._v(" "+t._s(t.price))]),e("div",{staticClass:"shopCount"},[t._v("共"+t._s(t.quantity)+"件")])])]):t._e()])},lt=[],dt={props:{shoppingImg:{},shoppingname:{},deliveryTime:{},orderState:{},shop:{},TradingInformation:{default:"交易成功"},shopPrice:{},quantity:{default:1}},data(){return{price:0}},created(){this.price=this.shopPrice*this.quantity}},pt=dt,ut=(0,c.Z)(pt,ct,lt,!1,null,"11e7d282",null),vt=ut.exports,ht={name:"myCart",components:{Tabbar:H,Order:rt,MyComp:vt},computed:{...(0,h.rn)(["completedOrder","OrderElement"])},data(){return{orderList:[],notFinish:[],loading:!0,finished:!1,num:0,showNav:0,showYesOrder:!0,showNotOrder:!0}},methods:{async onLoad(){this.num+=20;const t=await st(20,this.num);this.notFinish=[...this.notFinish,...t.data],this.loading=!1},async getOrderLiet(){const t=await st(20,0);this.completedOrder&&(this.orderList=this.completedOrder),this.notFinish=t.data,this.loading=!1},allBtn(t){this.showNav=t,1===t?(this.showYesOrder=!0,this.showNotOrder=!1,this.orderList=this.completedOrder):2===t?(this.showYesOrder=!1,this.showNotOrder=!0):(this.showYesOrder=!0,this.showNotOrder=!0)}},created(){this.getOrderLiet()}},mt=ht,_t=(0,c.Z)(mt,Q,tt,!1,null,"e5e5e250",null),Ct=_t.exports,gt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"submitContainer"},[e("div",{staticClass:"submitHead"},[e("div",{staticClass:"leftBtn",on:{click:t.back}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),e("div",{staticClass:"submitInput"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.shopkeyword,expression:"shopkeyword"}],attrs:{type:"text",placeholder:"派乐堡炸鸡"},domProps:{value:t.shopkeyword},on:{input:function(s){s.target.composing||(t.shopkeyword=s.target.value)}}}),e("div",{staticClass:"submitIcon"},[e("van-icon",{attrs:{name:"search"}})],1)]),e("div",{staticClass:"submitBtn",on:{click:t.submitShopping}},[t._v("搜索")])]),e("div",{staticClass:"box"},[e("div",{staticClass:"historySubmit"},[t._v("历史搜索 "),e("div",{staticClass:"remove",on:{click:t.removeHistorySubmit}},[e("van-icon",{attrs:{name:"delete-o"}})],1)]),e("div",{staticClass:"history"},t._l(t.historySubmit,(function(s,i){return e("span",{key:i},[t._v(t._s(s))])})),0),t.shopList.length>0?e("div",{staticClass:"shoppingList"},t._l(t.shopList,(function(s){return e("div",{key:s.id,staticClass:"shoppingrecommend",on:{click:function(e){return t.shopname(s.name)}}},[e("van-icon",{attrs:{name:"search"}}),e("span",[t._v(t._s(s.name))])],1)})),0):t._e()]),e("Tabbar")],1)},ft=[];const yt=function(t,s){return g({method:"get",url:"/v4/restaurants",params:{geohash:t,keyword:s}})};var bt={data(){return{shopkeyword:"",shopList:[],flag:null}},components:{Tabbar:H,[w.Z.Component.name]:w.Z.Component},computed:{...(0,h.rn)(["addressDetails","historySubmit"])},methods:{...(0,h.OI)(["gethistorySubmit","clearhistorySubmit"]),removeHistorySubmit(){w.Z.confirm({title:"是否清空历史记录"}).then((()=>{this.clearhistorySubmit()})).catch((()=>{}))},shopname(t){console.log(t),this.shopkeyword="",this.shopList=[],this.gethistorySubmit(t)},back(){this.$router.back(-1)},submitShopping(){D.Z.fail("暂无店铺信息")}},watch:{shopkeyword(){console.log("ss"),this.flag?(clearTimeout(this.flag),this.flag=null):""!==this.shopkeyword?this.flag=setTimeout((async()=>{const t=this.addressDetails.latitude+","+this.addressDetails.longitude,s=await yt(t,this.shopkeyword);console.log(s),this.shopList=s.data}),500):(this.flag=null,this.shopList=[])}},created(){}},kt=bt,wt=(0,c.Z)(kt,gt,ft,!1,null,"661f43db",null),St=wt.exports,Et=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"addressContainer"},[e("van-nav-bar",{attrs:{title:"选择收货地址","left-text":"返回","left-arrow":"",fixed:"",border:!1},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"submitAddress"},[e("div",{staticClass:"submit"},[e("div",{staticClass:"address",on:{click:function(s){return s.stopPropagation(),t.renewAddress.apply(null,arguments)}}},[t._v(t._s(t.$store.state.addressDetails.name)),e("span",{staticClass:"move"})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"inputAddress",attrs:{type:"text",name:"",id:"",placeholder:"输入你的收货地址"},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})])]),t.addressList.length>0?e("div",{staticClass:"recommendlist"},t._l(t.addressList,(function(s){return e("div",{key:s.id,staticClass:"recommend",on:{click:function(e){return t.getDetailedAddress(s)}}},[e("span",{staticClass:"title"},[t._v(t._s(s.name))]),e("span",{staticClass:"detailedAddress"},[t._v(t._s(s.address))])])})),0):t._e()],1)},Lt=[];const xt=function(t,s){return g({method:"get",url:"/v1/pois",params:{city_id:t,keyword:s,type:"search"}})};var Rt={data(){return{address:"",flag:null,addressList:[]}},computed:{...(0,h.rn)(["addressDetails"])},methods:{...(0,h.OI)(["newAddress","getdetailedAddress"]),onClickLeft(){this.$router.back(-1)},renewAddress(){this.$router.push("/positioncity")},getDetailedAddress(t){this.getdetailedAddress(t),this.$router.back(-1)}},watch:{address(){this.flag&&clearTimeout(this.flag),this.flag=setTimeout((async()=>{const t=await xt(this.$store.state.addressDetails.id,this.address);this.addressList=t.data}),500)}}},It=Rt,Pt=(0,c.Z)(It,Et,Lt,!1,null,"0fc3cf59",null),Tt=Pt.exports,At=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"redEvnelopeContainer"},[e("div",{staticClass:"head"},[e("span",{staticClass:"back",on:{click:t.back}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),t._v("获得红包")]),t._l(t.availableRedComponList,(function(t){return e("RedConpon",{key:t.id,attrs:{availableRedComponTime:t.end_date,availPrice:t.amount,online_paid_only:t.description_map.online_paid_only,limited:t.description_map.phone,RedConponName:t.name,sum_condition:t.description_map.sum_condition}})})),t._l(t.expiredRedCoupon,(function(t){return e("ExpiredRedCoupon",{key:t.id,attrs:{availableRedComponTime:t.end_date,availPrice:t.amount,online_paid_only:t.description_map.online_paid_only,limited:t.description_map.phone,RedConponName:t.name,sum_condition:t.description_map.sum_condition}})}))],2)},Nt=[];const $t=function(){return g({method:"get",url:"/promotion/v2/users/1/expired_hongbaos",params:{limit:20,offset:0}})},Ot=function(){return g({method:"get",url:"/promotion/v2/users/1/hongbaos",params:{limit:20,offset:0}})};var Bt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"componContainer"},[e("div",{staticClass:"redcomponName"},[e("span",[e("van-icon",{attrs:{name:"fire"}})],1),t._v(" "+t._s(t.RedConponName)+" ")]),e("div",{staticClass:"redComponBox"},[e("div",{staticClass:"redComponintroduce"},[e("div",{staticClass:"Highest"},[t._v(t._s(t.online_paid_only)+" "),e("div",{staticClass:"HighestLower"},[e("span",[t._v("￥")]),t._v(t._s(t.availPrice))])]),e("div",{staticClass:"ValidityPeriod"},[e("div",{staticClass:"ValidityPeriodTime"},[t._v("有效期："+t._s(t.availableRedComponTime))]),e("div",{staticClass:"fullReduction"},[t._v(t._s(t.sum_condition))])])]),e("div",{staticClass:"InstructionsForUse"},[e("div",{staticClass:"inforTitle"},[t._v(" "+t._s(t.limited)+" ")]),e("div",{staticClass:"goToUse",on:{click:t.gotoHome}},[t._v("去使用")])])])])},Zt=[],Ut={props:{phone:{},RedConponName:{},availableRedComponTime:{},availPrice:{},limited:{},sum_condition:{},online_paid_only:{}},methods:{gotoHome(){this.$router.push("/")}}},Ft=Ut,Ht=(0,c.Z)(Ft,Bt,Zt,!1,null,"4ee1be9c",null),Dt=Ht.exports,Mt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"componContainer"},[e("div",{staticClass:"redcomponName"},[e("span",[e("van-icon",{attrs:{name:"fire"}})],1),t._v(" "+t._s(t.RedConponName)+" ")]),e("div",{staticClass:"redComponBox"},[e("div",{staticClass:"redComponintroduce"},[e("div",{staticClass:"Highest"},[t._v(t._s(t.online_paid_only)+" "),e("div",{staticClass:"HighestLower"},[e("span",[t._v("￥")]),t._v(t._s(t.availPrice))])]),e("div",{staticClass:"ValidityPeriod"},[e("div",{staticClass:"ValidityPeriodTime"},[t._v("有效期："+t._s(t.availableRedComponTime))]),e("div",{staticClass:"fullReduction"},[t._v(t._s(t.sum_condition))])])]),e("div",{staticClass:"InstructionsForUse"},[e("div",{staticClass:"inforTitle"},[t._v(" "+t._s(t.limited)+" ")])])])])},zt=[],qt={props:{RedConponName:{},phone:{},availableRedComponTime:{},availPrice:{},limited:{},sum_condition:{},online_paid_only:{}},methods:{gotoHome(){this.$router.push("/")}}},Gt=qt,jt=(0,c.Z)(Gt,Mt,zt,!1,null,"4fe10f6f",null),Vt=jt.exports,Yt={components:{RedConpon:Dt,ExpiredRedCoupon:Vt},computed:{...(0,h.rn)(["userUseRedEvnelope"])},data(){return{availableRedComponList:[],expiredRedCoupon:[],value1:0,value2:"a",option1:[{text:"可用红包",value:0},{text:"过期红包",value:1}]}},methods:{...(0,h.OI)(["getUserUseRedEvnelope"]),back(){this.$router.back(-1)},async redConpon(){if(this.userUseRedEvnelope){this.availableRedComponList=this.userUseRedEvnelope;const t=await $t();this.expiredRedCoupon=t.data,console.log(t.data)}else{const t=await Ot();this.getUserUseRedEvnelope(t.data),this.availableRedComponList=this.userUseRedEvnelope;const s=await $t();this.expiredRedCoupon=s.data,console.log(s.data)}}},created(){this.redConpon(),console.log("11")}},Wt=Yt,Jt=(0,c.Z)(Wt,At,Nt,!1,null,"3ffd0ea2",null),Xt=Jt.exports,Kt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"loginContainer"},[e("van-nav-bar",{attrs:{title:"登入","left-arrow":"",fixed:"","z-index":"999",border:!1},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"userBox"},[e("div",{staticClass:"username"},[e("span",[t._v("用户名:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",name:"",id:"",placeholder:"输入用户名"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),e("div",{staticClass:"password"},[e("span",[t._v("输入密码:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.passwd,expression:"passwd"}],staticClass:"form-control",attrs:{type:"password",name:"",id:"input",required:"required",title:"",placeholder:"输入密码"},domProps:{value:t.passwd},on:{input:function(s){s.target.composing||(t.passwd=s.target.value)}}})]),e("div",{staticClass:"phone"},[e("span",[t._v("输入手机号: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",name:"",id:"",placeholder:"输入手机号"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}})]),e("div",{staticClass:"UserverificationCode"},[e("span",[t._v("输入验证码:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.InpoutverificationCode,expression:"InpoutverificationCode"}],attrs:{type:"text",name:"",id:"",placeholder:"输入验证码"},domProps:{value:t.InpoutverificationCode},on:{input:function(s){s.target.composing||(t.InpoutverificationCode=s.target.value)}}}),e("div",{staticClass:"verificationCodeImg"},[e("img",{attrs:{src:t.verificationCode.code,alt:"图片加载失败"}}),e("div",{staticClass:"NotSee",on:{click:t.notSee}},[e("div",{staticClass:"refresh"},[e("van-icon",{attrs:{name:"replay"}})],1),e("span",[t._v("看不清")]),e("span",[t._v("换一张")])])])]),e("button",{staticClass:"loginBtn",on:{click:t.loginBtn}},[t._v("登入")])]),e("div",{staticClass:"information"},[e("van-notice-bar",{attrs:{mode:"closeable",text:"登录的信息无需真实，符合格式即可"}})],1)],1)},Qt=[];const ts=function(t,s,e){return g({method:"post",url:"/v2/login",data:{username:t,password:s,captcha_code:e}})},ss=function(){return g({method:"post",url:"/v1/captchas"})};var es={name:"userLogin",components:{},data(){return{verificationCode:"",username:"admin",passwd:"123456",phone:"13782672367",InpoutverificationCode:""}},methods:{...(0,h.OI)(["getUserAbout"]),onClickLeft(){this.$router.back(-1)},async init(){const t=await ss();this.verificationCode=t.data,console.log(t.data)},async loginBtn(){if(0===this.username.length||0===this.passwd.length||0===this.InpoutverificationCode.length)alert("登入失败");else if(this.phone.length<11)alert("手机号码有误");else{const t=await ts(this.username,this.passwd,this.InpoutverificationCode);console.log(t),this.$router.push("/user");const s={username:this.username,passwd:this.passwd,InpoutverificationCode:this.InpoutverificationCode,phone:this.phone};this.getUserAbout(s)}const t={username:this.username,passWord:this.passwd,price:500};localStorage.setItem("elementUserInfo",JSON.stringify(t))},async notSee(){const t=await ss();this.verificationCode=t.data,console.log(t.data)}},created(){this.init()}},is=es,as=(0,c.Z)(is,Kt,Qt,!1,null,"7c785cce",null),os=as.exports,ns=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"settlementContainer"},[e("div",{staticClass:"head"},[t._v(" 确认订单 "),e("div",{staticClass:"back",on:{click:t.backShop}},[e("van-icon",{attrs:{name:"arrow-left"}})],1)]),e("div",{staticClass:"userAddress"},[e("div",{staticClass:"Address"},[t._v(t._s(t.addressDetails.name))]),e("div",{staticClass:"userAbout"},[t._v(t._s(t.userAbout.username))]),t._m(0),t._m(1)]),e("div",{staticClass:"userPhone"},[e("div",{staticClass:"Phone"},[t._v("用户手机号 "),e("span",[t._v(t._s(t.userAbout.phone))])]),e("div",{staticClass:"encryption"},[t._v("供商家、骑士使用（默认加密）")])]),e("div",{staticClass:"shopAbout"},[e("div",{staticClass:"shoppingName"},[t._v("奶茶")]),t._l(t.checkedShopList,(function(t){return e("BuyShop",{key:t.id,attrs:{shopCount:t.__v,shopImg:t.image_path,shopName:t.name,shopPrice:t.specfoods[0].price}})})),t._m(2),t._m(3),e("div",{staticClass:"delivery",on:{click:t.useRedEnvelope}},[e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"coupon"}})],1),t._v("使用红包 "),null===t.checkedRedEvnelope?e("div",{staticClass:"useRedConpon"},[t._v("未使用红包"),e("van-icon",{attrs:{name:"arrow"}})],1):e("div",{staticClass:"useRedConpon"},[e("span",[t._v("-￥")]),t._v(t._s(t.checkedRedEvnelope.price))])])],2),e("div",{staticClass:"settlementMoney"},[e("div",{staticClass:"SunMoney"},[e("div",{staticClass:"price"},[t._v("合计 ￥"),e("span",{staticClass:"priceStyle"},[t._v(t._s(t.checkedShopSunPrice))])]),!1===t.isDiscount?e("div",{staticClass:"Notdiscount"},[t._v("暂无优惠")]):e("div",{staticClass:"discount"},[t._v("优惠"+t._s(t.checkedRedEvnelope.price)+"元")])]),t.showSettlement?e("div",{staticClass:"settlement",on:{click:t.settlement}},[t._v("提交订单")]):e("div",{staticClass:"settlement",on:{click:t.settlement}},[e("van-loading",{attrs:{size:"0.75rem",color:"white"}},[t._v("提交订单...")])],1)]),e("van-action-sheet",{attrs:{closeable:!1,title:"可用红包"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("div",{staticClass:"content"},t._l(t.availableRedComponList,(function(s){return e("RedEvnelope",{key:s.id,attrs:{availableRedComponTime:s.end_date,availPrice:s.amount,online_paid_only:s.description_map.online_paid_only,limited:s.description_map.phone,RedConponName:s.name,sum_condition:s.sum_condition,GetredEvnelopeId:s.id,settlementPrice:t.checkedShopSunPrice},on:{redEvnelopeId:t.getredEvnelopeId}})})),1)])],1)},rs=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"delivey"},[t._v("立即送出 "),e("div",{staticClass:"deliveyTime"},[t._v("预计9:00送到")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"fayWay"},[t._v("支付方式 "),e("div",{staticClass:"fay"},[t._v("余额")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"delivery"},[e("div",{staticClass:"icon"},[t._v("￥")]),t._v("打包费 "),e("div",{staticClass:"UitpriceStyle"},[e("span",[t._v("￥")]),t._v("0")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"delivery"},[e("div",{staticClass:"icon"},[t._v("￥")]),t._v("配送费 "),e("div",{staticClass:"UitpriceStyle"},[e("span",[t._v("￥")]),t._v("5")])])}],cs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t.sum_condition<=t.settlementPrice?e("div",{staticClass:"componContainer",on:{click:t.redEvnelopeId}},[e("div",{staticClass:"redcomponName"},[e("span",[e("van-icon",{attrs:{name:"fire"}})],1),t._v(" "+t._s(t.RedConponName)+" ")]),e("div",{staticClass:"redComponBox"},[e("div",{staticClass:"redComponintroduce"},[e("div",{staticClass:"Highest"},[t._v(t._s(t.online_paid_only)+" "),e("div",{staticClass:"HighestLower"},[e("span",[t._v("￥")]),t._v(t._s(t.availPrice))])]),e("div",{staticClass:"ValidityPeriod"},[e("div",{staticClass:"ValidityPeriodTime"},[t._v("有效期："+t._s(t.availableRedComponTime))]),e("div",{staticClass:"fullReduction"},[t._v("满"+t._s(t.sum_condition)+"元可用")])])]),e("div",{staticClass:"InstructionsForUse"},[e("div",{staticClass:"inforTitle"},[t._v(" "+t._s(t.limited)+" ")])])])]):e("div",{staticClass:"componContainer Not"},[e("div",{staticClass:"redcomponName"},[e("span",[e("van-icon",{attrs:{name:"fire"}})],1),t._v(" "+t._s(t.RedConponName)+" ")]),e("div",{staticClass:"redComponBox"},[e("div",{staticClass:"redComponintroduce"},[e("div",{staticClass:"Highest"},[t._v(t._s(t.online_paid_only)+" "),e("div",{staticClass:"HighestLower"},[e("span",[t._v("￥")]),t._v(t._s(t.availPrice))])]),e("div",{staticClass:"ValidityPeriod"},[e("div",{staticClass:"ValidityPeriodTime"},[t._v("有效期："+t._s(t.availableRedComponTime))]),e("div",{staticClass:"fullReduction"},[t._v("满"+t._s(t.sum_condition)+"元可用")])])]),e("div",{staticClass:"InstructionsForUse"},[e("div",{staticClass:"inforTitle"},[t._v(" "+t._s(t.limited)+" ")])])])])])},ls=[],ds={props:{GetredEvnelopeId:{},phone:{},RedConponName:{},availableRedComponTime:{},availPrice:{},limited:{},sum_condition:{},online_paid_only:{},settlementPrice:{}},methods:{redEvnelopeId(){const t={id:this.GetredEvnelopeId,price:this.availPrice,sum_condition:this.sum_condition};this.$emit("redEvnelopeId",t)}}},ps=ds,us=(0,c.Z)(ps,cs,ls,!1,null,"5f178422",null),vs=us.exports,hs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"buyShopContainer"},[e("div",{staticClass:"shopImg"},[e("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.shopImg,alt:""}})]),e("div",{staticClass:"shopAbout"},[e("div",{staticClass:"foodName"},[t._v(t._s(t.shopName)+" "),e("div",{staticClass:"unitPrice"},[t._v("￥"),e("span",[t._v(t._s(t.shopPrice))])])]),e("div",{staticClass:"shopCount"},[t._v("X"),e("span",[t._v(t._s(t.shopCount))])])])])},ms=[],_s={props:{shopImg:{},shopName:{},shopPrice:{},shopCount:{}}},Cs=_s,gs=(0,c.Z)(Cs,hs,ms,!1,null,"c5433bb6",null),fs=gs.exports,ys={components:{BuyShop:fs,RedEvnelope:vs},data(){return{showSettlement:!0,show:!1,availableRedComponList:[],checkedShopList:[],checkedRedEvnelope:null,checkedShopSunPrice:5,isDiscount:!1,FrontRedEvnelopePrice:0}},computed:{...(0,h.rn)(["userUseRedEvnelope","userCheckedShop","userAbout","addressDetails","shop","userBalance"])},methods:{...(0,h.OI)(["getUserUseRedEvnelope","clearRedEvnelope","getOrderElement","reduceBalance"]),backShop(){this.$router.back(-1)},settlement(){const t=this.checkedShopSunPrice-this.FrontRedEvnelopePrice;if(this.userBalance-t>0){this.showSettlement=!1,this.reduceBalance(t),setTimeout((()=>{this.showSettlement=!0,this.checkedRedEvnelope&&this.clearRedEvnelope(this.checkedRedEvnelope.id),this.$router.replace("/orderFinish")}),2500);const s={totalPrice:this.checkedShopSunPrice,discount:this.FrontRedEvnelopePrice,shopPingName:this.shop.name,shoppingImg:this.shop.image_path,Balance:t,deliveryTime:this.getNewTime(),orderState:"交易成功",checkedShop:this.checkedShopList};this.getOrderElement(s),console.log(s)}else D.Z.fail("余额不足")},useRedEnvelope(){this.show=!0},getNewTime(){const t=new Date,s=t.getFullYear(),e=t.getMonth()+1,i=t.getDate(),a=t.getHours(),o=t.getMinutes();return s+"-"+e+"-"+i+" "+a+":"+o},async redConpon(){if(this.userUseRedEvnelope)this.availableRedComponList=this.userUseRedEvnelope;else{const t=await Ot();this.getUserUseRedEvnelope(t.data),this.availableRedComponList=this.userUseRedEvnelope}},getredEvnelopeId(t){this.checkedRedEvnelope=t,this.checkedShopSunPrice+=this.FrontRedEvnelopePrice,this.checkedShopSunPrice-=t.price,this.isDiscount=!0,this.FrontRedEvnelopePrice=t.price,this.show=!1},sunPrice(){this.userCheckedShop.forEach((t=>{this.checkedShopSunPrice+=t.__v*t.specfoods[0].price})),this.checkedShopList=this.userCheckedShop}},created(){this.sunPrice(),this.redConpon()}},bs=ys,ks=(0,c.Z)(bs,ns,rs,!1,null,"7ee82e4e",null),ws=ks.exports,Ss=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orderContainer"},[e("div",{staticClass:"head",on:{click:t.gotoCart}},[t._v("订单已完成"),e("span",[e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"shopList"},[e("div",{staticClass:"shopName"},[t._v(t._s(t.shopOrderElement.shopPingName))]),t._l(t.shopPingList,(function(t){return e("ShopList",{key:t._id,staticStyle:{"margin-top":"1.066rem"},attrs:{shopCount:t.__v,shopImg:t.image_path,shopName:t.name,shopPrice:t.specfoods[0].price}})})),t._m(0),0!==t.OrderElement.discount?e("div",{staticClass:"useRedEvnelope"},[t._v("使用红包 "),e("span",[t._v("￥"+t._s(t.OrderElement.discount))])]):t._e(),e("div",{staticClass:"settlement"},[e("span",{staticClass:"discount"},[t._v("已优惠￥"+t._s(t.shopOrderElement.discount))]),t._v("合计"),e("span",[t._v("￥"+t._s(t.shopOrderElement.totalPrice))])])],2)])},Es=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"SunPrice"},[e("div",{staticClass:"payPrice",staticStyle:{"margin-bottom":"1.066rem"}},[t._v("打包费 "),e("span",[t._v("￥0.00")])]),e("div",{staticClass:"payPrice"},[t._v("用户配送费 "),e("span",[t._v("￥5.00")])])])}],Ls={components:{ShopList:fs},data(){return{shopPingList:[],shopOrderElement:null}},computed:{...(0,h.rn)(["userCheckedShop","OrderElement"])},methods:{gotoCart(){this.$router.replace("/Cart")}},created(){console.log(this.userCheckedShop),this.shopPingList=this.userCheckedShop,this.shopOrderElement=this.OrderElement}},xs=Ls,Rs=(0,c.Z)(xs,Ss,Es,!1,null,"1618e8b8",null),Is=Rs.exports,Ps=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"positionCityContainer"},[e("van-nav-bar",{attrs:{title:"选择城市","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}}),t._l(t.cityList,(function(s,i){return e("a",{key:i,staticClass:"relatedAdress",attrs:{href:"#"+i}},[t._v(" "+t._s(i)+" "),t._l(s,(function(s){return e("a",{key:s.id,staticClass:"address",attrs:{href:"javascript:;"},on:{click:function(e){return t.addressBtn(s)}}},[t._v(t._s(s.name))])}))],2)}))],2)},Ts=[];const As=function(){return g({method:"get",url:"/v1/cities",params:{type:"group"}})};var Ns={data(){return{cityList:{}}},methods:{...(0,h.OI)(["newAddress"]),onClickLeft(){this.$router.back(-1)},async positionCity(){const t=await As();this.cityList=t.data},addressBtn(t){this.newAddress(t),this.$router.back(-1)}},created(){this.positionCity()}},$s=Ns,Os=(0,c.Z)($s,Ps,Ts,!1,null,"643c6e40",null),Bs=Os.exports,Zs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopinterfaceContainer"},[e("div",{staticClass:"shopBackground"},[e("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.shop.image_path,alt:"暂无图片"}}),e("div",{staticClass:"back",on:{click:t.backBtn}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),e("div",{staticClass:"shopAbout"},[e("div",{staticClass:"shopImg"},[e("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.shop.image_path,alt:""}})]),e("div",{staticClass:"shoptitle"},[t._v(t._s(t.shop.name))]),e("div",{staticClass:"shopscore"},[e("span",{staticClass:"shopscorestyle"},[t._v(t._s(t.shop.rating)+"分")]),e("span",{staticStyle:{"margin-right":".2667rem"}},[t._v("商家配送时间为"+t._s(t.shop.order_lead_time))]),e("span",[t._v("月售"+t._s(t.shop.rating_count))])]),e("div",{staticClass:"coupon",on:{click:t.aaa}},[e("van-icon",{staticStyle:{"font-size":".64rem","margin-right":".2667rem"},attrs:{name:"star"}}),t._v("￥4无门槛")],1),e("div",{staticClass:"delivery"},[t._v(t._s(t.shop.delivery_mode.text))]),e("div",{staticClass:"delivery"},[t._v("配送费优惠")])])]),t.showloading?e("div",{staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa",size:"1.17rem"}})],1):t._e(),t.showNav?e("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.obtainClass,expression:"obtainClass === false"}],staticClass:"ificationFixed"},t._l(t.stopClassification,(function(s,i){return e("span",{key:s.id,class:s.spanStyle,on:{click:function(s){return t.targetBtn(i,s)}}},[t._v(t._s(s.name))])})),0):t._e(),!1===t.showloading?e("div",{ref:"obtain",staticClass:"commoditys"},[e("van-tabs",{attrs:{animated:""},on:{click:t.onClick},model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},[e("van-tab",{attrs:{title:"点餐"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.obtainClass,expression:"obtainClass"}],staticClass:"Classification"},t._l(t.stopClassification,(function(s,i){return e("span",{key:s.id,class:s.spanStyle,on:{click:function(s){return t.targetBtn(i,s)}}},[t._v(t._s(s.name))])})),0),e("Foods",{attrs:{foodList:t.initshop}})],1),e("van-tab",{attrs:{title:"评论"}},[e("div",{staticClass:"commentBox"},t._l(t.shoppingComment,(function(t){return e("ShopCommemt",{key:t._id,attrs:{count:t.rating_star,username:t.username,userrelease:t.rated_at,shopList:t.item_ratings,userEvaluation:t.rating_text}})})),1)])],1)],1):t._e(),e("div",{staticClass:"settlement"},[e("div",{staticClass:"shoppingicon",on:{click:t.showAction}},[e("van-icon",{attrs:{name:"cart"}}),0!=t.shopCount?e("div",{staticClass:"shopCount"},[t._v(t._s(t.shopCount))]):t._e()],1),e("div",{staticClass:"settlementMoney"},[e("span",{staticClass:"total-price"},[t._v("￥"+t._s(t.sunMoney))]),e("span",{staticClass:"delivery-fee"},[t._v("预计配送费5￥")])]),t.sunMoney<=15?e("div",{staticClass:"money"},[t._v("15元起送")]):e("div",{staticClass:"goTosettlementMoney",on:{click:t.gotoSettlement}},[t._v("去结算")])]),e("van-action-sheet",{attrs:{closeable:!1,title:"已选商品"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("div",{staticClass:"content"},t._l(t.checkedFoods,(function(t){return e("CheckedFood",{key:t._id,attrs:{foodsImg:t.image_path,title:t.name,price:t.specfoods[0].price,count:t.__v}})})),1)])],1)},Us=[];const Fs=function(t){return g({method:"get",url:"/ugc/v2/restaurants/"+t+"/ratings"})};var Hs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"commentContainer"},[e("div",{staticClass:"userMove"},[e("div",{staticClass:"useravatar"},[t._v("用户头像")]),e("div",{staticClass:"userAbout"},[e("div",{staticClass:"username"},[t._v(t._s(t.username))]),e("div",{staticClass:"userrelease"},[t._v(t._s(t.userrelease))])])]),e("div",{staticClass:"satisfaction"},[t._v(" 满意度 "),e("van-rate",{attrs:{size:"0.64rem",color:"#EC7818","void-icon":"star","void-color":"#eee",readonly:!0},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),e("div",{staticClass:"satisfaction"},t._l(t.shopList,(function(s){return e("span",{key:s._id},[t._v(t._s(s.food_name))])})),0),""!==t.userEvaluation?e("div",{staticClass:"comment"},[t._v(t._s(t.userEvaluation))]):e("div",{staticClass:"comment"},[t._v("用户未评价")]),!1===t.classGood?e("div",{staticClass:"nogood",on:{click:t.isGood}},[e("van-icon",{attrs:{name:"good-job"}})],1):e("div",{staticClass:"good"},[e("van-icon",{attrs:{name:"good-job"},on:{click:t.isGood}})],1)])},Ds=[],Ms={props:{count:{default:4},useravatar:{},username:{},userEvaluation:{},userrelease:{},shopList:{}},data(){return{value:0,classGood:!1}},methods:{isGood(){this.classGood?this.classGood=!1:this.classGood=!0}},watch:{count(){this.value=this.count}},created(){this.value=this.count}},zs=Ms,qs=(0,c.Z)(zs,Hs,Ds,!1,null,"d9b007a8",null),Gs=qs.exports,js=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"checkedFoodsContainer"},[e("div",{staticClass:"foodImg"},[e("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.foodsImg,alt:"暂无图片"}})]),e("div",{staticClass:"foodAbout"},[e("div",{staticClass:"foodTitle"},[t._v(t._s(t.title))]),e("div",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),e("div",{staticClass:"count"},[t._v(t._s(t.count))])])])},Vs=[],Ys={props:{foodsImg:{},price:{default:0},title:{},count:{default:0}}},Ws=Ys,Js=(0,c.Z)(Ws,js,Vs,!1,null,"71f5f370",null),Xs=Js.exports,Ks=new i.Z;const Qs=function(t){return g({method:"get",url:"/shopping/v2/menu",params:{restaurant_id:t}})};var te=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"foodsContainer"},[i("div",{staticClass:"head"},[t._v(" "+t._s(t.foodList.description)+" ")]),t._l(t.foodList.foods,(function(s){return i("div",{key:s.id,staticClass:"food"},[i("div",{staticClass:"foodImg"},[s.image_path?i("img",{attrs:{src:"http://elm.cangdu.org/img/"+s.image_path,alt:""}}):i("img",{attrs:{src:e(6699),alt:""}})]),i("div",{staticClass:"foodAbout"},[i("div",{staticClass:"foodname"},[t._v(t._s(s.specfoods[0].name))]),i("div",{staticClass:"foodtitle"},[t._v("评分"+t._s(s.specfoods[0].recent_rating))]),i("div",{staticClass:"sellNum"},[t._v(t._s(s.tips))]),i("div",{staticClass:"money"},[t._v(t._s(s.specfoods[0].price)+"￥")]),i("BtnCount",{attrs:{num:s.__v,foodId:s._id}})],1)])}))],2)},se=[],ee=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"btnContainer"},[e("span",{on:{click:t.lowerCount}},[e("van-icon",{attrs:{name:"minus"}})],1),e("span",[t._v(t._s(t.num))]),e("span",{on:{click:t.addCount}},[e("van-icon",{attrs:{name:"plus"}})],1)])},ie=[],ae={props:{num:{default:0},foodId:{}},methods:{addCount(){Ks.$emit("addCount",[1,this.foodId])},lowerCount(){this.num>0&&Ks.$emit("addCount",[-1,this.foodId])}}},oe=ae,ne=(0,c.Z)(oe,ee,ie,!1,null,"29e83436",null),re=ne.exports,ce={name:"foodList",components:{BtnCount:re},props:{foodList:{}},data(){return{value:0}}},le=ce,de=(0,c.Z)(le,te,se,!1,null,"2fd31b6c",null),pe=de.exports,ue={components:{Foods:pe,CheckedFood:Xs,ShopCommemt:Gs},data(){return{stopClassification:[],initshop:{},sunMoney:0,flag:!0,shopCount:0,active:0,show:!1,checkedFoods:[],obtainClass:!0,showNav:!0,shoppingComment:[],obtainTop:533,obtainState:!0,showloading:!0}},computed:{...(0,h.rn)(["shop","userAbout"])},mounted(){window.addEventListener("scroll",this.handleScrollx,!0)},methods:{...(0,h.OI)(["getUserCheckedShop"]),aaa(){D.Z.fail("无法领取")},handleScrollx(){window.pageYOffset>=this.obtainTop?this.obtainClass=!1:this.obtainClass=!0},onClick(t,s){this.showNav=0===t},backBtn(){this.$router.push("/")},async getShopInterfaceList(){const t=await Qs(this.shop.id);t.data.some(((t,s)=>{if(!(s<=6))return!0;this.stopClassification.push(t)})),this.initshop=this.stopClassification[0],this.showloading=!1,this.stopClassification[0].spanStyle="spanStyle"},targetBtn(t,s){this.initshop=this.stopClassification[t],this.stopClassification.some((t=>{t.spanStyle=""})),this.stopClassification[t].spanStyle="spanStyle"},showAction(){this.show=!0},async getShoppingComment(){const t=await Fs(this.shop.id);this.shoppingComment=t.data},gotoSettlement(){null===this.userAbout?D.Z.fail("未登录"):(this.getUserCheckedShop(this.checkedFoods),this.$router.push("/settlement"))}},created(){this.getShopInterfaceList(),this.getShoppingComment()},updated(){Ks.$on("addCount",(t=>{this.flag&&(this.flag=!1,this.initshop.foods.some((s=>{if(t[0]>0){if(s._id===t[1]){if(s.__v+=t[0],this.sunMoney+=s.specfoods[0].price,this.shopCount++,0===this.checkedFoods.length)this.checkedFoods.push(s);else{for(const t in this.checkedFoods)this.checkedFoods[t]._id===s._id&&this.checkedFoods.splice(t,1);this.checkedFoods.push(s)}return!0}}else if(s._id===t[1]){if(s.__v>0){s.__v+=t[0],this.sunMoney-=s.specfoods[0].price,this.shopCount--;for(const t in this.checkedFoods)this.checkedFoods[t]._id===s._id&&this.checkedFoods.splice(t,1);0!==s.__v&&this.checkedFoods.push(s)}return!0}})))})),this.obtainState&&(this.obtainTop=this.$refs.obtain.getBoundingClientRect().top,this.obtainState=!1),this.flag=!0}},ve=ue,he=(0,c.Z)(ve,Zs,Us,!1,null,"45f1e6dd",null),me=he.exports,_e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"navPageContainer"},[e("div",{staticClass:"head"},[e("span",{on:{click:t.back}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),t._v(t._s(t.navTitle))]),e("van-dropdown-menu",{attrs:{"active-color":"#1989fa"}},[e("van-dropdown-item",{attrs:{options:t.option1},model:{value:t.value1,callback:function(s){t.value1=s},expression:"value1"}})],1),t._l(t.shopList,(function(t){return e("SHopPing",{key:t.id,attrs:{takeawayImg:t.image_path,takeawayTitle:t.name,score:t.rating,deliveryTime:t.order_lead_time,distance:t.distance,discount:t.supports,restaurant:t}})}))],2)},Ce=[];const ge=function(t,s,e){return g({method:"get",url:"/shopping/restaurants",params:{latitude:t,longitude:s,restaurant_category_id:e}})};var fe={components:{SHopPing:x},computed:{...(0,h.rn)(["addressDetails"])},data(){return{value1:4,option1:[{text:"智能排序",value:4},{text:"配送速度",value:3},{text:"距离最近",value:5},{text:"销量最高",value:6}],shopId:0,navTitle:"",order_by:4,shopList:[]}},watch:{async value1(){const t=await ge(this.addressDetails.latitude,this.addressDetails.longitude,this.order_by);this.shopList=t.data}},methods:{getHashInfo(){const t=decodeURIComponent(location).split("?");this.shopId=t[1].split("&")[0],this.shopId=this.shopId.split("=")[1],this.navTitle=t[1].split("&")[1],this.navTitle=this.navTitle.split("=")[1]},back(){this.$router.back(-1)},async getShopList(){const t=await ge(this.addressDetails.latitude,this.addressDetails.longitude,this.order_by);this.shopList=t.data}},created(){this.getHashInfo(),this.getShopList()}},ye=fe,be=(0,c.Z)(ye,_e,Ce,!1,null,"214afc56",null),ke=be.exports;i.Z.use(p.Z);const we=[{path:"/",component:G},{path:"/user",component:K},{path:"/cart",component:Ct},{path:"/submit",component:St},{path:"/submitarea",component:Tt},{path:"/positioncity",component:Bs},{path:"/shopinterface",component:me},{path:"/redEnvelope",component:Xt},{path:"/login",component:os},{path:"/settlement",component:ws},{path:"/orderFinish",component:Is},{path:"/navPage",component:ke}],Se=new p.Z({routes:we});var Ee=Se;i.Z.use(h.ZP);var Le=new h.ZP.Store({state:{userAbout:null,addressDetails:{},detailedAddress:null,shop:null,shoppingCart:[],flag:!0,historySubmit:[],showHint:!0,userUseRedEvnelope:null,userCheckedShop:[],OrderElement:null,completedOrder:[],userBalance:0},getters:{},mutations:{isShowHint(t){t.showHint=!1},getUserAbout(t,s){t.userAbout=s,t.userBalance=s.price},newAddress(t,s){t.addressDetails=s},getdetailedAddress(t,s){t.detailedAddress=s},getshopid(t,s){t.shop=s},getshoppingCart(t,s){t.shoppingCart.length>0?(t.shoppingCart.some((e=>{if(s._id===e._id)return e.count=s.count,t.flag=!1,!0})),t.flag&&t.shoppingCart.push(s)):t.shoppingCart.push(s),t.flag=!0},gethistorySubmit(t,s){t.historySubmit.push(s)},clearhistorySubmit(t){t.historySubmit=[]},getUserUseRedEvnelope(t,s){t.userUseRedEvnelope=s},clearRedEvnelope(t,s){console.log(s),console.log(t.userUseRedEvnelope),t.userUseRedEvnelope.some(((e,i)=>{e.id===s&&t.userUseRedEvnelope.splice(i,1)}))},getUserCheckedShop(t,s){t.userCheckedShop=s},getOrderElement(t,s){t.OrderElement=s,t.completedOrder.push(t.OrderElement)},reduceBalance(t,s){t.userBalance-=s}},actions:{},modules:{}}),xe=e(2813);e(415),e(8185);i.Z.use(xe.ZP),i.Z.config.productionTip=!1,new i.Z({router:Ee,store:Le,render:t=>t(d)}).$mount("#app")},8185:function(){(function(t,s){const e=s.documentElement,i=t.devicePixelRatio||1;function a(){s.body?s.body.style.fontSize=12*i+"px":s.addEventListener("DOMContentLoaded",a)}function o(){const t=e.clientWidth/20;e.style.fontSize=t+"px"}if(a(),o(),t.addEventListener("resize",o),t.addEventListener("pageshow",(function(t){t.persisted&&o()})),i>=2){const t=s.createElement("body"),i=s.createElement("div");i.style.border=".5px solid transparent",t.appendChild(i),e.appendChild(t),1===i.offsetHeight&&e.classList.add("hairlines"),e.removeChild(t)}})(window,document)},6699:function(t,s,e){"use strict";t.exports=e.p+"img/noImg.83b35d59.jpg"}},s={};function e(i){var a=s[i];if(void 0!==a)return a.exports;var o=s[i]={exports:{}};return t[i](o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(s,i,a,o){if(!i){var n=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],o=t[d][2];for(var r=!0,c=0;c<i.length;c++)(!1&o||n>=o)&&Object.keys(e.O).every((function(t){return e.O[t](i[c])}))?i.splice(c--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var l=a();void 0!==l&&(s=l)}}return s}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,a,o]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){e.p=""}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,i){var a,o,n=i[0],r=i[1],c=i[2],l=0;if(n.some((function(s){return 0!==t[s]}))){for(a in r)e.o(r,a)&&(e.m[a]=r[a]);if(c)var d=c(e)}for(s&&s(i);l<n.length;l++)o=n[l],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},i=self["webpackChunkdome_takeout"]=self["webpackChunkdome_takeout"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(9659)}));i=e.O(i)})();
//# sourceMappingURL=app.6a9acbdf.js.map