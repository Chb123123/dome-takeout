(function(){var t={4466:function(t,s,a){"use strict";var e=a(8935),i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("router-view")],1)},n=[],o={},r=o,d=a(1001),c=(0,d.Z)(r,i,n,!1,null,null,null),l=c.exports,u=a(2809),p=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"AppContainer"},[a("div",{staticClass:"Apphead"},[a("div",{staticClass:"address",on:{click:t.gotoSubmit}},[t._v(t._s(t.address.name)+" "),a("span",{staticClass:"move"})]),a("div",{staticClass:"address",on:{click:t.gotoSubmit}},[t._v(t._s(t.address.name)+" "),a("span",{staticClass:"move"})]),a("div",{staticClass:"shopping-cart"},[a("van-icon",{attrs:{name:"cart-o"}})],1),a("div",{staticClass:"Private-letter"},[a("van-icon",{attrs:{name:"comment-o"}})],1)]),a("div",{staticClass:"submitBox"},[a("div",{staticClass:"submit"},[a("div",{staticClass:"submitBtn"},[t._v("搜索")]),a("div",{staticClass:"photograph"},[a("van-icon",{attrs:{name:"photograph"}})],1),a("div",{staticClass:"submitSuggest"},[t._v("派乐炸鸡汉堡")])])]),a("div",{staticClass:"navbar"},[a("Navber",{attrs:{navList:t.shopNavList}})],1),t._m(0),a("div",{staticClass:"takewayBox"},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.shopList,(function(t){return a("Takeaway",{key:t.id,attrs:{takeawayImg:t.image_path,takeawayTitle:t.name,score:t.rating,deliveryTime:t.order_lead_time,distance:t.distance,discount:t.supports,restaurant:t}})})),1),a("Tabbar")],1)])},v=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"Attributes"},[a("span",[t._v("智能排序")]),a("span",[t._v("配送速度")]),a("span",[t._v("距离最近")]),a("span",[t._v("销量最高")])])}],h=a(4665),m=a(6166),f=a.n(m);const _=f().create({baseURL:"https://elm.cangdu.org"});var g=_;const C=function(){return g({method:"get",url:"/v2/index_entry"})},b=function(t,s,a=0){return g({method:"get",url:"/shopping/restaurants",params:{latitude:s,longitude:t,offset:a}})};var y=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"takewayContainer",on:{click:t.getRestaurantId}},[a("div",{staticClass:"takeawayImg"},[a("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.takeawayImg,alt:""}})]),a("div",{staticClass:"takeawayAbout"},[a("div",{staticClass:"takeawaytitle"},[t._v(t._s(t.takeawayTitle)+" ")]),a("div",{staticClass:"takeawayFraction"},[t._v(t._s(t.score)+"分 "),a("div",{staticClass:"delivery"},[t._v(t._s(t.distance)+" "+t._s(t.deliveryTime))])]),a("div",{staticClass:"delivery"},[t._v("起送￥15")]),t._m(0),a("div",{staticClass:"discount"},[t.discount[0]?a("div",{staticClass:"support",style:"color:#"+t.discount[0].icon_color},[t._v(t._s(t.discount[0].name))]):t._e(),t.discount[1]?a("div",{staticClass:"support",style:"color:#"+t.discount[1].icon_color},[t._v(t._s(t.discount[1].name))]):t._e(),t.discount[2]?a("div",{staticClass:"support",style:"color:#"+t.discount[2].icon_color},[t._v(t._s(t.discount[2].name))]):t._e()])])])},w=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"Evaluation"},[a("div",{staticClass:"Evaluation1"},[t._v("热情掌柜")])])}],k={props:{takeawayTitle:{},takeawayImg:{},score:{},deliveryTime:{},distance:{},discount:{},restaurant:{}},methods:{...(0,h.OI)(["getshopid"]),getRestaurantId(){this.getshopid(this.restaurant),this.$router.push("/shopInterface")}}},x=k,L=(0,d.Z)(x,y,w,!1,null,"ae473370",null),A=L.exports,$=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"box"},[a("van-swipe",{staticClass:"my-swipe",attrs:{"indicator-color":"white"}},t._l(t.navList,(function(s){return a("van-swipe-item",{key:s.id},[a("div",{staticClass:"navbarContainer"},t._l(s,(function(s){return a("div",{key:s.id,staticClass:"nav",on:{click:function(a){return t.getNavId(s.id)}}},[a("img",{attrs:{src:"https://fuss10.elemecdn.com"+s.image_url,alt:""}}),a("span",{staticClass:"navtitle"},[t._v(t._s(s.title))])])})),0)])})),1)],1)},E=[],T={props:{navList:{}},methods:{getNavId(t){console.log(t)}}},Z=T,I=(0,d.Z)(Z,$,E,!1,null,"c7ab2da6",null),O=I.exports;const B=function(){return g({method:"get",url:"/v1/cities",params:{type:"guess"}})};var S=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("van-tabbar",{attrs:{route:"",fixed:"","z-index":"9999"}},[a("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"search",dot:"",to:"/submit"}},[t._v("搜索")]),a("van-tabbar-item",{attrs:{icon:"cart-o",badge:"5",to:"/cart"}},[t._v("订单")]),a("van-tabbar-item",{attrs:{icon:"friends-o",to:"/user"}},[t._v("用户")])],1)},N=[],D={name:"tabbarStyle",data(){return{count:0}},computed:{...(0,h.rn)("shoppingCart")}},M=D,P=(0,d.Z)(M,S,N,!1,null,null,null),j=P.exports,z={components:{Takeaway:A,Tabbar:j,Navber:O},data(){return{address:{},shopList:[],loading:!0,finished:!1,num:0,shopNavList:[]}},computed:{...(0,h.rn)(["detailedAddress","addressDetails"])},methods:{...(0,h.OI)(["newAddress"]),async getTakeawayAbout(){const t=await b(this.address.longitude,this.address.latitude);this.shopList=t.data,this.loading=!1},async onLoad(){this.num+=20;const t=await b(this.address.longitude,this.address.latitude,this.num);this.shopList=[...this.shopList,...t.data],this.loading=!1},async ShopNavBar(){const t=await C();let s=[];t.data.forEach(((t,a)=>{s.push(t),(a+1)%8===0&&(this.shopNavList.push(s),s=[])}))},async getNewCity(){const t=await B();this.detailedAddress?(this.address=this.detailedAddress,this.getTakeawayAbout(this.detailedAddress.longitude,this.detailedAddress.latitude)):(this.address=t.data,this.newAddress(this.address),this.getTakeawayAbout(this.addressDetails.longitude,this.addressDetails.latitude))},gotoSubmit(){this.$router.push("/submitarea")}},created(){this.getNewCity(),this.ShopNavBar()}},F=z,R=(0,d.Z)(F,p,v,!1,null,"426e6c8e",null),H=R.exports,U=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("h1",[t._v("未登入")]),a("Tabbar")],1)},W=[],q={components:{Tabbar:j}},G=q,J=(0,d.Z)(G,U,W,!1,null,null,null),K=J.exports,Q=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("h1",[t._v("订单模块")]),a("Tabbar")],1)},V=[],X={components:{Tabbar:j}},Y=X,tt=(0,d.Z)(Y,Q,V,!1,null,null,null),st=tt.exports,at=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("h1",[t._v("搜索组件")]),a("Tabbar")],1)},et=[],it={components:{Tabbar:j}},nt=it,ot=(0,d.Z)(nt,at,et,!1,null,null,null),rt=ot.exports,dt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"addressContainer"},[a("van-nav-bar",{attrs:{title:"选择收货地址","left-text":"返回","left-arrow":"",fixed:"",border:!1},on:{"click-left":t.onClickLeft}}),a("div",{staticClass:"submitAddress"},[a("div",{staticClass:"submit"},[a("div",{staticClass:"address",on:{click:function(s){return s.stopPropagation(),t.renewAddress.apply(null,arguments)}}},[t._v(t._s(t.$store.state.addressDetails.name)),a("span",{staticClass:"move"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"inputAddress",attrs:{type:"text",name:"",id:"",placeholder:"输入你的收货地址"},domProps:{value:t.address},on:{input:function(s){s.target.composing||(t.address=s.target.value)}}})])]),t.addressList.length>0?a("div",{staticClass:"recommendlist"},t._l(t.addressList,(function(s){return a("div",{key:s.id,staticClass:"recommend",on:{click:function(a){return t.getDetailedAddress(s)}}},[a("span",{staticClass:"title"},[t._v(t._s(s.name))]),a("span",{staticClass:"detailedAddress"},[t._v(t._s(s.address))])])})),0):t._e()],1)},ct=[];const lt=function(t,s){return g({method:"get",url:"/v1/pois",params:{city_id:t,keyword:s,type:"search"}})};var ut={data(){return{address:"",flag:null,addressList:[]}},computed:{...(0,h.rn)(["addressDetails"])},methods:{...(0,h.OI)(["newAddress","getdetailedAddress"]),onClickLeft(){this.$router.back(-1)},renewAddress(){this.$router.push("/positioncity")},getDetailedAddress(t){this.getdetailedAddress(t),this.$router.back(-1)}},watch:{address(){this.flag&&clearTimeout(this.flag),this.flag=setTimeout((async()=>{const t=await lt(this.$store.state.addressDetails.id,this.address);this.addressList=t.data}),500)}}},pt=ut,vt=(0,d.Z)(pt,dt,ct,!1,null,"0fc3cf59",null),ht=vt.exports,mt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"positionCityContainer"},[a("van-nav-bar",{attrs:{title:"选择城市","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}}),t._l(t.cityList,(function(s,e){return a("a",{key:e,staticClass:"relatedAdress",attrs:{href:"#"+e}},[t._v(" "+t._s(e)+" "),t._l(s,(function(s){return a("a",{key:s.id,staticClass:"address",attrs:{href:"javascript:;"},on:{click:function(a){return t.addressBtn(s)}}},[t._v(t._s(s.name))])}))],2)})),t._m(0)],2)},ft=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"position"},[a("span",{attrs:{id:"A"}},[t._v("S")])])}];const _t=function(){return g({method:"get",url:"/v1/cities",params:{type:"group"}})};var gt={data(){return{cityList:{}}},methods:{...(0,h.OI)(["newAddress"]),onClickLeft(){this.$router.back(-1)},async positionCity(){const t=await _t();this.cityList=t.data},addressBtn(t){this.newAddress(t),this.$router.back(-1)}},created(){this.positionCity()}},Ct=gt,bt=(0,d.Z)(Ct,mt,ft,!1,null,"9f84c262",null),yt=bt.exports,wt=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shopinterfaceContainer"},[a("div",{staticClass:"shopBackground"},[a("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.shop.image_path,alt:""}}),a("div",{staticClass:"back",on:{click:t.backBtn}},[a("van-icon",{attrs:{name:"arrow-left"}})],1),a("div",{staticClass:"shopAbout"},[a("div",{staticClass:"shopImg"},[a("img",{attrs:{src:"http://elm.cangdu.org/img/"+t.shop.image_path,alt:""}})]),a("div",{staticClass:"shoptitle"},[t._v(t._s(t.shop.name))]),a("div",{staticClass:"shopscore"},[a("span",{staticClass:"shopscorestyle"},[t._v(t._s(t.shop.rating)+"分")]),a("span",{staticStyle:{"margin-right":".2667rem"}},[t._v("商家配送时间为"+t._s(t.shop.order_lead_time))]),a("span",[t._v("月售"+t._s(t.shop.rating_count))])]),a("div",{staticClass:"coupon"},[a("van-icon",{staticStyle:{"font-size":".64rem","margin-right":".2667rem"},attrs:{name:"star"}}),t._v("￥4无门槛")],1),a("div",{staticClass:"delivery"},[t._v(t._s(t.shop.delivery_mode.text))]),a("div",{staticClass:"delivery"},[t._v("配送费优惠")])])]),a("div",{staticClass:"commoditys"},[a("van-tabs",{attrs:{animated:""},model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},[a("van-tab",{attrs:{title:"点餐"}},[a("div",{staticClass:"Classification"},t._l(t.stopClassification,(function(s,e){return a("span",{key:s.id,on:{click:function(s){return t.targetBtn(e)}}},[t._v(t._s(s.name))])})),0),a("Foods",{attrs:{foodList:t.initshop}})],1),a("van-tab",{attrs:{title:"评论"}},[a("div",{staticClass:"Classification"},t._l(t.stopClassification,(function(s,e){return a("span",{key:s.id,on:{click:function(s){return t.targetBtn(e)}}},[t._v(t._s(s.name))])})),0),a("Foods",{attrs:{foodList:t.initshop}})],1)],1)],1),a("div",{staticClass:"settlement"},[a("div",{staticClass:"shoppingicon",on:{click:t.showAction}},[a("van-icon",{attrs:{name:"cart"}}),0!=t.shopCount?a("div",{staticClass:"shopCount"},[t._v(t._s(t.shopCount))]):t._e()],1),a("div",{staticClass:"settlementMoney"},[a("span",{staticClass:"total-price"},[t._v("￥"+t._s(t.sunMoney))]),a("span",{staticClass:"delivery-fee"},[t._v("预计配送费5￥")])]),t.sunMoney<=15?a("div",{staticClass:"money"},[t._v("15元起送")]):a("div",{staticClass:"goTosettlementMoney"},[t._v("去结算")])]),a("van-action-sheet",{attrs:{closeable:!1,title:"已选商品"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"style"})])])],1)},kt=[],xt=new e.Z;const Lt=function(t){return g({method:"get",url:"/shopping/v2/menu",params:{restaurant_id:t}})};var At=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"foodsContainer"},[e("div",{staticClass:"head"},[t._v(" "+t._s(t.foodList.description)+" ")]),t._l(t.foodList.foods,(function(s){return e("div",{key:s.id,staticClass:"food"},[e("div",{staticClass:"foodImg"},[s.image_path?e("img",{attrs:{src:"http://elm.cangdu.org/img/"+s.image_path,alt:""}}):e("img",{attrs:{src:a(6699),alt:""}})]),e("div",{staticClass:"foodAbout"},[e("div",{staticClass:"foodname"},[t._v(t._s(s.specfoods[0].name))]),e("div",{staticClass:"foodtitle"},[t._v("123")]),e("div",{staticClass:"sellNum"},[t._v(t._s(s.tips))]),e("div",{staticClass:"money"},[t._v(t._s(s.specfoods[0].price)+"￥")]),e("BtnCount",{attrs:{num:s.__v,foodId:s._id}})],1)])}))],2)},$t=[],Et=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"btnContainer"},[a("span",{on:{click:t.lowerCount}},[a("van-icon",{attrs:{name:"minus"}})],1),a("span",[t._v(t._s(t.num))]),a("span",{on:{click:t.addCount}},[a("van-icon",{attrs:{name:"plus"}})],1)])},Tt=[],Zt={props:{num:{default:0},foodId:{}},methods:{addCount(){xt.$emit("addCount",[1,this.foodId])},lowerCount(){this.num>0&&xt.$emit("addCount",[-1,this.foodId])}}},It=Zt,Ot=(0,d.Z)(It,Et,Tt,!1,null,"29e83436",null),Bt=Ot.exports,St={name:"foodList",components:{BtnCount:Bt},props:{foodList:{}},data(){return{value:0}}},Nt=St,Dt=(0,d.Z)(Nt,At,$t,!1,null,"7ba2a439",null),Mt=Dt.exports,Pt={components:{Foods:Mt},data(){return{stopClassification:[],initshop:{},sunMoney:0,flag:!0,shopCount:0,active:0,show:!1}},computed:{...(0,h.rn)(["shop"])},methods:{backBtn(){this.$router.push("/")},async getShopInterfaceList(){const t=await Lt(this.shop.id);t.data.some(((t,s)=>{if(!(s<=10))return!0;this.stopClassification.push(t)})),this.initshop=this.stopClassification[0]},targetBtn(t){console.log(t),this.initshop=this.stopClassification[t]},showAction(){this.show=!0}},created(){this.getShopInterfaceList()},updated(){xt.$on("addCount",(t=>{this.flag&&(this.flag=!1,this.initshop.foods.some((s=>{if(t[0]>0){if(s._id===t[1])return s.__v+=t[0],this.sunMoney+=s.specfoods[0].price,this.shopCount++,!0}else if(s._id===t[1])return s.__v>0&&(s.__v+=t[0],this.sunMoney-=s.specfoods[0].price,this.shopCount--),!0})))})),console.log(this.shopCount),this.flag=!0}},jt=Pt,zt=(0,d.Z)(jt,wt,kt,!1,null,"585049ba",null),Ft=zt.exports;e.Z.use(u.Z);const Rt=[{path:"/",component:H},{path:"/user",component:K},{path:"/cart",component:st},{path:"/submit",component:rt},{path:"/submitarea",component:ht},{path:"/positioncity",component:yt},{path:"/shopinterface",component:Ft}],Ht=new u.Z({routes:Rt});var Ut=Ht;e.Z.use(h.ZP);var Wt=new h.ZP.Store({state:{addressDetails:{},detailedAddress:null,shop:null,shoppingCart:[],flag:!0},getters:{},mutations:{newAddress(t,s){t.addressDetails=s},getdetailedAddress(t,s){t.detailedAddress=s},getshopid(t,s){t.shop=s},getshoppingCart(t,s){t.shoppingCart.length>0?(t.shoppingCart.some((a=>{if(s._id===a._id)return a.count=s.count,t.flag=!1,!0})),t.flag&&t.shoppingCart.push(s)):t.shoppingCart.push(s),t.flag=!0}},actions:{},modules:{}}),qt=a(2576);a(415),a(8185);e.Z.use(qt.ZP),e.Z.config.productionTip=!1,new e.Z({router:Ut,store:Wt,render:t=>t(l)}).$mount("#app")},8185:function(){(function(t,s){const a=s.documentElement,e=t.devicePixelRatio||1;function i(){s.body?s.body.style.fontSize=12*e+"px":s.addEventListener("DOMContentLoaded",i)}function n(){const t=a.clientWidth/20;a.style.fontSize=t+"px"}if(i(),n(),t.addEventListener("resize",n),t.addEventListener("pageshow",(function(t){t.persisted&&n()})),e>=2){const t=s.createElement("body"),e=s.createElement("div");e.style.border=".5px solid transparent",t.appendChild(e),a.appendChild(t),1===e.offsetHeight&&a.classList.add("hairlines"),a.removeChild(t)}})(window,document)},6699:function(t,s,a){"use strict";t.exports=a.p+"img/noImg.83b35d59.jpg"}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(s,e,i,n){if(!e){var o=1/0;for(l=0;l<t.length;l++){e=t[l][0],i=t[l][1],n=t[l][2];for(var r=!0,d=0;d<e.length;d++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](e[d])}))?e.splice(d--,1):(r=!1,n<o&&(o=n));if(r){t.splice(l--,1);var c=i();void 0!==c&&(s=c)}}return s}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[e,i,n]}}(),function(){a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,{a:s}),s}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var i,n,o=e[0],r=e[1],d=e[2],c=0;if(o.some((function(s){return 0!==t[s]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(d)var l=d(a)}for(s&&s(e);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(l)},e=self["webpackChunkdome_takeout"]=self["webpackChunkdome_takeout"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[998],(function(){return a(4466)}));e=a.O(e)})();
//# sourceMappingURL=app.0c171d97.js.map